<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0f172a">
    <title>VibeBudget Elite</title>

    <link rel="manifest" href='data:application/manifest+json,{"name":"VibeBudget Elite","short_name":"VibeBudget","start_url":"index.html","display":"standalone","background_color":"#0f172a","theme_color":"#0f172a","icons":[{"src":"https://fav.farm/ðŸ’Ž","sizes":"512x512","type":"image/png"}]}'>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;400;700&display=swap');
        body { background-color: #0f172a; font-family: 'Inter', sans-serif; color: white; margin: 0; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 2.5rem; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-md space-y-6 text-center">
        <div>
            <h1 id="remaining" class="text-7xl font-thin tracking-tighter">â‚¬0.00</h1>
            <p id="daily" class="text-emerald-400 text-xs mt-2 uppercase tracking-widest">Berechne...</p>
        </div>
        <div class="glass p-5"><canvas id="budgetChart" height="180"></canvas></div>
        <div class="glass p-2 flex items-center gap-2">
            <input type="number" id="amount" inputmode="decimal" placeholder="0.00" class="flex-1 bg-transparent text-2xl p-4 outline-none text-white font-light">
            <button onclick="add()" class="bg-emerald-500 text-slate-900 w-14 h-14 rounded-2xl font-bold text-3xl active:scale-90 transition-transform">âˆ’</button>
        </div>
        <button onclick="if(confirm('Reset?')){localStorage.clear();location.reload();}" class="opacity-20 text-[10px] uppercase tracking-widest">Woche zurÃ¼cksetzen</button>
    </div>

    <script>
        // Service Worker Trick fÃ¼r Pixel/Chrome
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:text/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdmZXRjaCcsIGU9PmludmFsaWQp').catch(() => {});
        }

        let state = JSON.parse(localStorage.getItem('vibeData') || '{"limit":200,"rem":200,"history":[]}');
        let chart;

        function init() {
            const ctx = document.getElementById('budgetChart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'line',
                data: { labels: [0,1,2], datasets: [{ data: [200, 200, 200], borderColor: '#fff', borderWidth: 3, tension: 0.4, pointRadius: 0 }] },
                options: { plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } }
            });
            render();
        }

        function render() {
            document.getElementById('remaining').innerText = `â‚¬${state.rem.toFixed(2)}`;
            const days = 8 - (new Date().getDay() || 7);
            document.getElementById('daily').innerText = `â‚¬${Math.max(0, state.rem / days).toFixed(2)} pro Tag verfÃ¼gbar`;
            localStorage.setItem('vibeData', JSON.stringify(state));
        }

        function add() {
            const v = parseFloat(document.getElementById('amount').value);
            if (v > 0) { state.rem -= v; document.getElementById('amount').value = ''; render(); }
        }

        window.onload = init;
    </script>
</body>
</html>
